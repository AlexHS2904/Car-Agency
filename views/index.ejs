<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Car-Agency</title>

  <!-- 1. Bootstrap -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="/Assets/styles.css">

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&family=M+PLUS+Rounded+1c&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
</head>

<body>
  <%- include("partials/header.ejs") %>

  <!-- Sección Home -->
  <section class="Home" id="Home">
    <div class="px-4 py-5 my-5 text-center">
      <h1 class="display-5 fw-bold text-body-emphasis">
        Potencia y estilo en un solo lugar.
      </h1>
      <div class="col-lg-6 mx-auto">
        <p class="lead mb-4 text-center">Diseñado para superar expectativas.</p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <a href="/#cat" class="btn btn-light btn-lg px-4 gap-3">
          Ver catálogo
        </a>
        <a href="/" class="btn btn-outline-light btn-lg px-4">
          Cotizar un auto
        </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección Categorías -->
  <h1 class="section-title" id="cat">Categorías</h1>

  <section id="Categories">
  <div class="card-container">
    <div
      class="card"
      style="background-image: url('/Assets/Imgs/Audi_back.jpeg');"
    >
      <h2>Hatchback</h2>
      <a href="/catalogo?tipo=hatchback" class="arrow-btn">↗</a>
    </div>

    <div
      class="card"
      style="background-image: url('/Assets/Imgs/Sedan.jpeg');"
    >
      <h2>Sedán</h2>
      <a href="/catalogo?tipo=sedan" class="arrow-btn">↗</a>
    </div>

    <div
      class="card"
      style="background-image: url('/Assets/Imgs/Q5.jpeg');"
    >
      <h2>SUV</h2>
      <a href="/catalogo?tipo=suv" class="arrow-btn">↗</a>
    </div>
  </div>
</section>


  <!-- Sección Recomendaciones -->

  <h1 class="section-title">Recomendaciones</h1>

  <section class="mini-carousel-section">
  <div class="mini-carousel-container">
    <button class="mini-carousel-btn mini-carousel-btn-left" id="miniCarouselPrev">‹</button>

    <div class="mini-carousel-wrapper" id="miniCarouselWrapper">
      <div class="mini-carousel-track" id="miniCarouselTrack">

        <% if (miniCars && miniCars.length > 0) { %>
  <% miniCars.forEach(car => { %>
    <div class="mini-carousel-card car-card">
      <img
        src="<%= car.image_url && car.image_url !== '' ? car.image_url : '/Assets/Imgs/placeholder-car.jpg' %>"
        alt="<%= car.brand %> <%= car.model %>"
      >
      <div class="p-3">
        <h5 class="mb-1"><%= car.brand %> <%= car.model %></h5>

        <% 
          const t = car.body_type ? car.body_type.toLowerCase() : null;
          let label = "";
          if (t === "sedan") label = "Sedán";
          else if (t === "hatchback") label = "Hatchback";
          else if (t === "suv") label = "SUV / Camioneta";
          else if (t === "pickup") label = "Pickup";
          else if (t) label = t.charAt(0).toUpperCase() + t.slice(1);
        %>
        <% if (label) { %>
          <p class="mb-2">
            <span class="badge bg-light text-dark">
              <%= label %>
            </span>
          </p>
        <% } %>

        <div class="d-flex justify-content-between align-items-center mb-2 small text-muted">
          <span class="d-flex align-items-center gap-1">
            <img class="icon" src="/Assets/Imgs/person.svg" alt="person">
            <%= car.seats || 5 %> pax
          </span>
          <span><%= car.year %></span>
        </div>

        <p class="fw-semibold mb-3" style="font-size: 1.05rem;">
          $<%= Number(car.price_per_day).toLocaleString('es-MX') %> MXN/día
        </p>

        <% if (currentUser) { %>
          <a href="/cars/<%= car.id %>/reserve" class="btn btn-sm btn-outline-dark w-100">
            Rentar
          </a>
        <% } else { %>
          <a href="/login?returnTo=/cars/<%= car.id %>/reserve" class="btn btn-sm btn-outline-dark w-100">
            Rentar
          </a>
        <% } %>
      </div>
    </div>
  <% }) %>
<% } else { %>
  <p>No hay autos disponibles por ahora.</p>
<% } %>
      </div>
    </div>

    <button class="mini-carousel-btn mini-carousel-btn-right" id="miniCarouselNext">›</button>
  </div>

  <a href="/catalogo" class="cat-btn">
    <p>Catálogo completo →</p>
  </a>
</section>

<section class="section section--muted" id="nosotros">
  <div class="section__head">
    <h2 class="section__title">Nosotros</h2>
    <!-- <a class="section__cta" href="/nosotros">Conoce más →</a> -->
  </div>

  <div class="about-shell">
    <div class="about-content">
      <p class="about-text">
        Somos una agencia enfocada en ofrecer vehículos seleccionados, con procesos claros y atención cercana.
        Una vitrina digital ágil + asesoría real para decidir sin sorpresas.
      </p>

      <div class="about-highlights">
        <div class="about-item"><span class="about-number">+120</span><span class="about-label">Autos publicados</span></div>
        <div class="about-item"><span class="about-number">48h</span><span class="about-label">Tiempo de respuesta</span></div>
        <div class="about-item"><span class="about-number">100%</span><span class="about-label">Transparencia</span></div>
      </div>
    </div>

    <div class="about-card">
      <h3>¿Qué nos diferencia?</h3>
      <ul>
        <li>Inventario actualizado en tiempo real</li>
        <li>Publicaciones claras (precio/día, modelo, fotos)</li>
        <li>Reservas en línea sin pasos extra</li>
        <li>Visitas guiadas para ver el auto físicamente</li>
      </ul>
      <div class="about-badge"><span class="badge-dot"></span> Agencia verificada</div>
    </div>
  </div>
</section>

  <%- include("partials/footer.ejs") %>


  <script src="/Assets/scripts.js"></script>


  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
